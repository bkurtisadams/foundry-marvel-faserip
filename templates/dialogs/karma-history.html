<form class="karma-history-dialog">
    <div class="karma-totals">
        <div class="karma-current">
            <h2>Current Karma</h2>
            <div class="value">{{actor.system.secondaryAbilities.karma.value}}</div>
        </div>
        <div class="karma-max">
            <h2>Maximum Karma</h2>
            <div class="value">{{actor.system.secondaryAbilities.karma.max}}</div>
        </div>
    </div>
    
    <div class="controls-row">
        <select class="karma-type-filter">
            <option value="all">All Entries</option>
            <option value="earned">Karma Earned</option>
            <option value="spent">Karma Spent</option>
        </select>
        
        <input type="text" class="karma-search" placeholder="Search descriptions..."/>
        
        <div class="controls-buttons">
            <button type="button" class="add-entry" title="Add New Entry">
                <i class="fas fa-plus"></i>
            </button>
            <button type="button" class="export-button" title="Export History">
                <i class="fas fa-file-export"></i>
            </button>
        </div>
    </div>

    <div class="karma-list">
        <div class="karma-headers">
            <div class="header-date">Date <i class="fas fa-sort"></i></div>
            <div class="header-amount">Amount <i class="fas fa-sort"></i></div>
            <div class="header-description">Description <i class="fas fa-sort"></i></div>
            <div class="header-actions"></div>
        </div>
        
        <div class="karma-entries">
            {{#each karmaHistory}}
            <div class="karma-entry" data-entry-index="{{@index}}">
                <div class="entry-date">{{date}}</div>
                <div class="entry-amount {{#if (gt amount 0)}}positive{{else}}negative{{/if}}">
                    {{#if (gt amount 0)}}+{{/if}}{{amount}}
                </div>
                <div class="entry-description">{{description}}</div>
                <div class="entry-actions">
                    <a class="edit-entry"><i class="fas fa-edit"></i></a>
                    <a class="delete-entry"><i class="fas fa-trash"></i></a>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</form>